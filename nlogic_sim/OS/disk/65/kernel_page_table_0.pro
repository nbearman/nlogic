// Kernel page table 0

// The kernal page table comes initialized with these locations mapped to kernel's virtual memory:
// - the kernel program
// - MMIO devices range (0xFF 00 00 00 is the start of physical addresses for MMIO)
// - physical memory
//      - these PTEs are at the end of this table
//      - map all real RAM addresses to kernel VM, accessible as (0x00 3F 00 00 + physical address)
//          to access physical address from kernel virtual address space, add 0x00 3F 00 00

// TODO we shouldn't map all of physical memory to kernel's VA
//	As physical memory increases, there becomes less usable space in the kernel's VA
//	Add another way for kernel to access physical addresses directly; special registers in MMU?
// TODO: why do we need to access physical RAM directly?
//  Kernel needs to traverse page directories and page tables while handling page faults
//  Kernel uses virtual memory so that parts of the kernel can be paged out (not the page fault handler, though)
//      If kernel always used physical addressing, it must always reside in RAM in entirety
//      Can parts of the kernel run with physical addressing? (just the page fault handler?)
//          Non-page fault handler parts of the kernel could be treated sort of like additional user programs?
//          Syscall for an unloaded part of the kernel:
//              Syscall -> interrupt handler (wired)
//              Interrupt handler checks that TARGET_SYSCALL program is loaded
//              Interrupt handler loads TARGET_SYSCALL entry point
//              Interrupt handler saves USER program state in RAM (we must eventually return)
//                  (store interruptees in a stack; TARGET_SYSCALL may interrupt itself)
//              Interrupt handler switches context to TARGET_SYSCALL program
//              Page faults in TARGET_SYSCALL program are handled normally
//              Would TARGET_SYSCALL program be safely interruptable? Must be to support page faults
//              USER interrupts can remain disabled?
//


80  00  00  03 // R W (10) (read and write allowed) physical page 3 (kernel program page 0)
80  00  00  04 // R W (10) (read and write allowed) physical page 4 (kernel program page 1)
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
80  0F  F0  00 // R W (10) (read and write allowed) physical page 0xFF000 (MMIO devices)
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
00  00  00  00
// Start of mapping phsyical RAM to kernel's VM
// RW == 10, readable and not write protected
80  00  00  00
80  00  00  01
80  00  00  02
80  00  00  03
80  00  00  04
80  00  00  05
80  00  00  06
80  00  00  07
80  00  00  08
80  00  00  09
80  00  00  0A
80  00  00  0B
80  00  00  0C
80  00  00  0D
80  00  00  0E
80  00  00  0F
